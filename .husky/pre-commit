#!/bin/sh

set -euo pipefail

CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)

if ! echo "$CURRENT_BRANCH" | grep -Eq '^(chore|fix|refactor|feat)/.+$'; then
  echo "Current branch '$CURRENT_BRANCH' must start with chore/, fix/, refactor/, or feat/."
  exit 1
fi

if [ -z "$(git diff --cached --name-only)" ]; then
  echo "No staged files to lint."
  exit 0
fi

echo "Running lint-staged on staged files..."
# bun run lint:staged